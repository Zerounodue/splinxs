//- 
    ...
     

extends layout

block append scripts
    script(src='resources/js/rmc3@3.3.5.js')
    // socket.io for signaling
    script(src='/socket.io/socket.io.js')
    script(src='resources/js/connection.js')
    script(src='resources/js/tourist.connection.js')
    script(src='resources/js/util.js')
    script(src='resources/js/ui.js')
    script(src='resources/js/tourist.ui.js')
    script(src='resources/js/DetectRTC.js')
    script(src='resources/js/map.js')
    script(src='resources/js/tourist.map.js')
    script.
      $(document).ready(function () {
            username = "!{name}";
            initSplinxs();
            initUI();
            initTouristUI();
            initTouristConnection();
      });

block append stylesheets
    //TODO remove when it works...
    link(rel='stylesheet', href='resources/css/styleOld.css')
    link(rel='stylesheet', href='resources/css/chat.css')

block content
    main#content
      button#btn_joinConnection(type='button') __join connection
      button#btn_closeConnection(type='button', hidden='') __close connection
      br
      #audio(hidden='')
        button#btn_startAudio(type='button') __start audio
        button#btn_stopAudio(type='button') __stop audio
        #audioDiv
      br
      #video.video(hidden='')
        button#btn_shareVideo(type='button') __start video
        button#btn_stopVideo(type='button') __stop video
        button#btn_muteVideo(type='button') __mute video
        button#btn_unmuteVideo(type='button') __unmute video
        #myVideo
        div(id="map" hidden)
        .chatBox(id="chatBox")
          .panel.panel-primary(id="primaryPanel")
              .panel-heading(id="headingPanel")
                  span.glyphicon.glyphicon-comment
                  |  #{texts.GENERAL.CHAT}
                  span#spn_isTyping.text-center
                  .btn-group.pull-right
                      img(src='resources/images/icons/arrowDown.png', alt='close', id="btn_minimiseChat")
                      //
                          button#btn_minimiseChat.btn.btn-default.btn-xs(type='button')
                            span.glyphicon.glyphicon-chevron-down
                          ul.dropdown-menu.slidedown
                            li
                              a(href='#')
                                span.glyphicon.glyphicon-refresh
                                | __Refresh
                            li
                              a(href='#')
                                span.glyphicon.glyphicon-ok-sign
                                | __Available
              .panel-body(id="bodyPanel")
                  ul#chat.chat
              .panel-footer(id="footerPanel")
                  .input-group
                      input#inp_chat.form-control.input-sm(type='text', placeholder='#{texts.G.TYPE_MESSAGE}')
                      span.input-group-btn
                          button#btn_chat.btn.btn-sm #{texts.GENERAL.SEND}
          // </div>
      audio#audioPlayer
    #loadBox.load(hidden='')
      #load1.loadDot
      #load2.loadDot
      #load3.loadDot
    script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyBfwr4Jux2OwmpetTfqEYpGBoX95Z5obkI&libraries=drawing,places&callback=initMap')
    
block append foot
//
    div(id="smallChat", class="smallChat", hidden)
        img#smallChatImg.smallChatImg(src='resources/images/smallChat.png', alt='chat')
        span#smallChatText.smallChatText Chat
        img.smallChatUp(src='resources/images/arrowUp.png', alt='up')